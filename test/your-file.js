const t={promise:'<svg xmlns="http://www.w3.org/2000/svg" width=40 height=40 viewBox="0 0 200 200"><radialGradient id="a" cx=".66" fx=".66" cy=".313" fy=".313" gradientTransform="scale(1.5)"><stop offset="0" stop-color="#111"/><stop offset=".3" stop-color="#111" stop-opacity=".9"/><stop offset=".6" stop-color="#111" stop-opacity=".6"/><stop offset=".8" stop-color="#111" stop-opacity=".3"/><stop offset="1" stop-color="#111" stop-opacity="0"/></radialGradient><circle transform-origin="center" fill="none" stroke="url(#a)" stroke-width="15" stroke-linecap="round" stroke-dasharray="200 1000" cx="100" cy="100" r="70"><animateTransform type="rotate" attributeName="transform" calcMode="spline" dur="2" values="360;0" keyTimes="0;1" keySplines="0 0 1 1" repeatCount="indefinite"/></circle><circle transform-origin="center" fill="none" opacity=".2" stroke="#111" stroke-width="15" stroke-linecap="round" cx="100" cy="100" r="70"/></svg>',info:'<svg width="40" height="40" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"/></svg>',error:'<svg width="40" height="40" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M256 42.667c117.803 0 213.333 95.53 213.333 213.333S373.803 469.333 256 469.333 42.667 373.803 42.667 256 138.197 42.667 256 42.667Zm48.917 134.25L256 225.835l-48.917-48.918-30.166 30.166L225.835 256l-48.918 48.917 30.166 30.166L256 286.165l48.917 48.918 30.166-30.166L286.165 256l48.918-48.917-30.166-30.166Z" fill-rule="evenodd"/></svg>',warning:'<svg width="40" height="40" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M30.555 25.219 18.036 3.783a2.675 2.675 0 0 0-3.782 0L1.734 25.219a2.674 2.674 0 0 0 0 3.781h28.82a2.671 2.671 0 0 0 .001-3.781zM14.992 11.478a1.5 1.5 0 1 1 3 0v7a1.5 1.5 0 0 1-3 0v-7zm1.509 13.508a1.5 1.5 0 1 1-.001-2.999 1.5 1.5 0 0 1 .001 2.999z"/></svg>',success:'<svg width="40" height="40" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"/></svg>'},e={num:0,distance:{x:30,y:30},gap:15,maxHeight:1e3},i=t=>document.querySelectorAll(t),s=t=>document.createElement(t);export default class{$bellContainer;$bellNums;$bellParent;timer;constructor(i,l,n={}){this.text=i,this.type=l;const{animate:o=!0,isColored:a=!0,transitionDuration:h=300,position:r="bottom-right",typeAnimation:c="fade-in",screenTime:p=3e3,expand:b=!1,theme:d="default",customClass:m,customStyles:$,customIcon:u,customHTML:g,timeline:y,removeOn:x,distance:v,gap:C}=n;this.transitionDuration=h??300,this.position=r.split("-"),this.classPosition=this.position.join("."),this.screenTime=p,this.expand=b,this.theme="default"!==n?.theme&&n?.theme,this.customClass=m,this.isColored=a,this.styles=$,this.timeline=y?"timeline":"",this.removeEvent=x,e.distance.x=v?.x??e.distance.x,e.distance.y=v?.y??e.distance.y,e.gap=C??e.gap,this.$bellContainer=s("li");const w=["b_c",...this.position];this.$bellIcon=s("span"),this.type&&"none"!=this.type||(this.$bellIcon.style.display="none"),this.$bellTextContainer=s("div");const f=[];this.$bellTextContainer.classList.add("b_t-c");var L;if([this.isColored&&this.type,this.theme,this.customClass,this.timeline].forEach((t=>t&&w.push(t))),this.$bellContainer.classList.add(...w,c),this.$bellIcon.classList.add("b_i"),this.$bellIcon.innerHTML=u??t[this.type]??"",this.text.title&&(this.$bellTitle=s("h3"),this.$bellTitle.classList.add("b_t"),this.$bellTitle.textContent=this.text.title,f.push(this.$bellTitle)),this.text.description&&(this.$bellDescription=s("p"),this.$bellDescription.classList.add("b_d"),this.$bellDescription.textContent=this.text.description,f.push(this.$bellDescription)),this.$bellTextContainer.append(...f),this.$bellContainer.append(this.$bellIcon,this.$bellTextContainer),this.$bellContainer.setAttribute("bell-num",e.num++),this.$bellContainer.style.transition=`${this.transitionDuration}ms ease all`,o||(this.$bellContainer.style.transition="none",this.$bellTextContainer.style.transition="none"),this.$bellParent=(L=`.b_p.${this.classPosition}`,document.querySelector(L)),this.$bellParent||(this.$bellParent=s("ol"),this.$bellParent.classList.add("b_p"),document.body.append(this.$bellParent)),this.expand&&this.$bellParent.classList.add("expand"),$){Object.keys($).forEach((t=>{const e="container"==t?this.$bellContainer:"title"==t?this.$bellTitle:"description"==t?this.$bellDescription:this.$bellIcon.querySelector("svg");e&&Object.entries($[t]).forEach((([t,i])=>{e.style.setProperty(t,i),"--b_w"==t&&this.$bellParent.style.setProperty(t,i)}))}))}g&&(this.$bellContainer.innerHTML=g),this.$bellParent.classList.add(...this.position),this.$bellParent.append(this.$bellContainer)}promise(e,i){this.$bellContainer.classList.remove(this.type),this.$bellContainer.classList.add("pending");const l=s("h3"),n=s("span");n.classList.add("promise"),n.innerHTML=t.promise,this.$bellIcon.append(n),l.classList.add(["b_t_p"]),this.$bellTextContainer.querySelector(".b_d")?.remove(),this.$bellTextContainer.append(l),l.textContent=i.pending,this.launch(!0),e.then((()=>{this.#t("success",this.$bellNums,i)})).catch((t=>{this.#t("error",this.$bellNums,i)}))}#t(e,i,s){this.$bellIcon.innerHTML=t[e],this.isColored&&this.$bellContainer.classList.add(e),this.$bellContainer.classList.remove("pending"),this.$bellContainer.classList.add("complete"),this.$bellTitle.textContent=s[e],this.timeline&&this.#e(),this.timer=setTimeout((()=>{this.dismiss(i)}),this.screenTime)}#e(){this.$bellContainer.classList.add("init_count"),this.$bellContainer.style.setProperty("--t_an",this.screenTime+"ms")}setPositions(t,i){const{length:s}=t,l=(i&&s>2?t[s-2]:this.$bellNums[s-2],[...t].reverse()),n=l[0];let o=1,{x:a,y:h}=e.distance;if(l.length<1)return;let r=n.className.includes("top")?"top":"bottom";n.className.includes("left");l.forEach(((t,i)=>{t.style.scale=o,this.$bellParent.style.setProperty("--b_x",a+"px"),t.style[r]=h+"px",i<2&&(o=(1-.06*(i+1)).toFixed(2),h+=e.gap)}));let c=e.distance.y;l&&n&&(e.maxHeight=n?.getAttribute("bell-height")),l.forEach(((i,s)=>{i.style.height=`${e.maxHeight}px`,c+=s>0?Number(t[s-1]?.getAttribute("bell-height"))+15:0,i.style.setProperty("--top",`${c}px`),this.$bellParent.style.setProperty("--height-parent",`${c}px`)}))}launch(t){const e=this.$bellContainer.getBoundingClientRect().height;this.$bellContainer.setAttribute("bell-height",e),this.$bellContainer.style.setProperty("--b_h",e+"px"),setTimeout((()=>{if("click"==this.removeEvent&&this.$bellContainer.addEventListener("click",this.dismiss.bind(this)),"button"==this.removeEvent){const t=s("button");t.className="b_close",t.innerHTML='<svg width="40" height="40" viewBox="-3.5 0 19 19" xmlns="http://www.w3.org/2000/svg"><path d="M11.383 13.644A1.03 1.03 0 0 1 9.928 15.1L6 11.172 2.072 15.1a1.03 1.03 0 1 1-1.455-1.456l3.928-3.928L.617 5.79a1.03 1.03 0 1 1 1.455-1.456L6 8.261l3.928-3.928a1.03 1.03 0 0 1 1.455 1.456L7.455 9.716z"/></svg>\n',this.$bellContainer.appendChild(t),t.addEventListener("click",this.dismiss.bind(this))}this.$bellNums=i(`.b_c.${this.classPosition}`),this.setPositions(this.$bellNums),this.$bellContainer.classList.add("active"),t||(this.timeline&&this.#e(),this.timer=setTimeout((()=>{this.dismiss(this.$bellNums)}),this.screenTime))}),100)}dismiss(){clearTimeout(this.timer),this.$bellNums=i(`.b_c.active.${this.classPosition}`);let t=[...this.$bellNums].filter((t=>t.getAttribute("bell-num")!==this.$bellContainer.getAttribute("bell-num")));this.$bellContainer.classList.remove("active"),this.setPositions(t,t!==this.$bellNums),this.$bellContainer.className.includes("top")?this.$bellContainer.style.top="-75px":this.$bellContainer.style.bottom="-75px",setTimeout((()=>{this.$bellContainer.remove(),0===i(`.b_c.${this.classPosition}`).length&&(this.$bellParent.remove(),e.num=0)}),this.transitionDuration)}}